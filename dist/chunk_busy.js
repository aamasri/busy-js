"use strict";(self.webpackChunk_aamasri_busy=self.webpackChunk_aamasri_busy||[]).push([[297],{389:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{reset:()=>reset,start:()=>start,status:()=>status,stop:()=>stop});const debug=!1;let fadeoutAnimationTimer,fadeoutModalTimer,busyAnimation=null,modalOverlay=null;function start(id,timeout=7,modal=!1){window.top.clearTimeout(fadeoutAnimationTimer),id=id?id.replace(/'/g,""):"",timeout="number"==typeof timeout?1e3*timeout:7e3,_initQueue();const duplicateItem=window.top.busyQueue.findIndex((item=>item.id===id));duplicateItem>-1&&(window.top.busyQueue.splice(duplicateItem,1),debug&&console.debug(`busy item "${id}" already in queue!`)),window.top.busyQueue.push({id:id,expiry:Date.now()+timeout,modal:modal}),_updateBusy(),window.top.setTimeout((()=>{stop(id)}),timeout)}function stop(id){if(_initQueue(),window.top.busyQueue.length){let arrayIndex;(id=id?id.toString().replace(/'/g,""):"")&&(arrayIndex=window.top.busyQueue.findIndex((busyItem=>busyItem.id===id)),arrayIndex>-1&&(debug&&console.debug(`busy item "${window.top.busyQueue[arrayIndex].id}" stopped!`),window.top.busyQueue.splice(arrayIndex,1))),window.top.busyQueue.forEach((item=>{item.expiry<=Date.now()&&(arrayIndex=window.top.busyQueue.findIndex((busyItem=>busyItem.id===item.id)),arrayIndex>-1&&(debug&&console.debug(`removing expired busy item "${window.top.busyQueue[arrayIndex].id}"`),window.top.busyQueue.splice(arrayIndex,1)))}))}_updateBusy()}function reset(){window.top.busyQueue=[],_updateBusy()}function status(){_initQueue(),console.log("busy queue:",window.top.busyQueue)}function _initQueue(){"object"!=typeof window.top.busyQueue&&(window.top.busyQueue=[])}function _updateBusy(){debug&&console.debug(`_updateBusy() queue length: ${window.top.busyQueue.length}`),0===window.top.busyQueue.length?(window.top.clearTimeout(fadeoutAnimationTimer),busyAnimation.style.opacity="0",fadeoutAnimationTimer=window.top.setTimeout((()=>{busyAnimation.style.display="none"}),500),_fadeOutModal()):(!function(id){window.top.clearTimeout(fadeoutAnimationTimer),busyAnimation=busyAnimation||window.top.document.body.querySelector("#animated-loader"),null===busyAnimation&&(modalOverlay=document.createElement("div"),modalOverlay.id="animated-loader-modal-overlay",window.top.document.body.appendChild(modalOverlay),busyAnimation=document.createElement("div"),busyAnimation.id="animated-loader",busyAnimation.innerHTML="<div><div><div><div><div><div><div><div><div><div></div></div></div></div></div></div></div></div></div>",window.top.document.body.appendChild(busyAnimation));const topZ=function(){let zTop=0;const elements=document.getElementsByTagName("*");for(let i=0;i<elements.length;i++){let zIndex=window.top.getComputedStyle(elements[i]).getPropertyValue("z-index");zIndex=isNaN(zIndex)?0:parseInt(zIndex),zIndex&&zIndex>zTop&&(zTop=zIndex)}return zTop}().toString();busyAnimation.style.zIndex=topZ,modalOverlay.style.zIndex=topZ,busyAnimation.title=id,busyAnimation.style.display="block",busyAnimation.style.opacity="1"}(window.top.busyQueue[0].id),window.top.busyQueue.some((item=>item.modal))?(window.top.clearTimeout(fadeoutModalTimer),modalOverlay.style.display="block",modalOverlay.style.opacity="1"):_fadeOutModal())}function _fadeOutModal(){window.top.clearTimeout(fadeoutModalTimer),modalOverlay.style.opacity="0",fadeoutModalTimer=window.top.setTimeout((()=>{modalOverlay.style.display="none"}),500)}}}]);