"use strict";(self.webpackChunk_aamasri_busy=self.webpackChunk_aamasri_busy||[]).push([[297],{238:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{queue:()=>queue,reset:()=>busy_reset,start:()=>start,status:()=>busy_status,stop:()=>stop});function onTopZIndex(){let zTop=0;const elements=document.getElementsByTagName("*");for(let i=0;i<elements.length;i++){let zIndex=getZIndex(elements[i]);zIndex&&zIndex>zTop&&(zTop=zIndex)}return zTop}function getZIndex(element,recursive=!1){let zIndex=getAppliedStyle(element,"z-Index")||0;return zIndex=isNaN(zIndex)||2147483647==zIndex?0:parseInt(zIndex),recursive&&0===zIndex?getZIndex(element.parentNode,!0):zIndex}function getAppliedStyle(el,style){if(el instanceof jQuery&&(el=el[0]),!el instanceof Object)return"";try{return window.getComputedStyle(el).getPropertyValue(style)}catch(error){return console.warn("dom-utils.getAppliedStyle(el, style) threw error",error),""}}let $busyAnimation=!1,$modalOverlay=!1;const queue=[];async function start(id){let timeout=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,modal=arguments.length>2&&void 0!==arguments[2]&&arguments[2];id=id?id.replace(/'/g,""):"",timeout="number"==typeof timeout?1e3*timeout:7e3;const expiry=Date.now()+timeout;if(queue.push({id:id,expiry:expiry,modal:modal}),!$busyAnimation){void 0===window.jQuery&&(window.jQuery=await __webpack_require__.e(729).then(__webpack_require__.t.bind(__webpack_require__,755,23)),window.jQuery=window.jQuery.default);const isInIframe=window.location!==window.parent.location,$body=jQuery(isInIframe?parent.document.body:document.body);$modalOverlay=jQuery('<div id="animated-loader-modal-overlay"></div>').appendTo($body),$busyAnimation=jQuery(`<div id="animated-loader" title="${id}">\n                                            <div>\n                                                <div>\n                                                    <div>\n                                                        <div>\n                                                            <div>\n                                                                <div>\n                                                                    <div>\n                                                                        <div>\n                                                                            <div>\n                                                                                <div></div>\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>`).appendTo($body)}$busyAnimation.stop().css("z-index",onTopZIndex()).fadeIn(),modal&&$modalOverlay.fadeTo("slow",.4),window.setTimeout("busy.stop()",timeout)}function stop(id){if(!queue.length)return;let arrayIndex;(id=id?id.toString().replace(/'/g,""):"")&&(arrayIndex=queue.findIndex((busyItem=>busyItem.id===id)),arrayIndex>-1&&queue.splice(arrayIndex,1)),arrayIndex=queue.findIndex((busyItem=>busyItem.expiry<=Date.now())),arrayIndex>-1&&(console.warn(`busy indication timed out waiting for "${queue[arrayIndex].id}" to finish!`),queue.splice(arrayIndex,1)),arrayIndex=queue.findIndex((busyItem=>busyItem.modal)),-1===arrayIndex&&_hideModalOverlay(),0===queue.length&&(_hideModalOverlay(),$busyAnimation.stop().fadeOut("fast"))}function _hideModalOverlay(){"none"!==$modalOverlay.css("display")&&$modalOverlay.fadeOut("fast",(function(){$modalOverlay.css("opacity",0)}))}function busy_reset(){window.setTimeout((function(){queue.length=0,$busyAnimation&&$busyAnimation.length&&$busyAnimation.stop().fadeOut("fast")}),1e3)}function busy_status(){console.log("busy queue:",queue)}}}]);