"use strict";(self.webpackChunk_aamasri_busy=self.webpackChunk_aamasri_busy||[]).push([[297],{389:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{reset:()=>reset,start:()=>start,status:()=>status,stop:()=>stop});const debug=!1;let fadeoutAnimationTimer,fadeoutModalTimer,busyAnimation=null,modalUnderlay=null;function start(id,timeout=7,modal=!1){window.clearTimeout(fadeoutAnimationTimer),id=id?id.replace(/'/g,""):"",timeout="number"==typeof timeout?1e3*timeout:7e3,_initQueue();const duplicateItem=window.busyQueue.findIndex((item=>item.id===id));duplicateItem>-1&&(window.busyQueue.splice(duplicateItem,1),debug&&console.debug(`busy item "${id}" already in queue!`)),window.busyQueue.push({id:id,expiry:Date.now()+timeout,modal:modal}),_updateBusy(),window.setTimeout((()=>{stop(id)}),timeout)}function stop(id){if(_initQueue(),window.busyQueue.length){let arrayIndex;(id=id?id.toString().replace(/'/g,""):"")&&(arrayIndex=window.busyQueue.findIndex((busyItem=>busyItem.id===id)),arrayIndex>-1&&(debug&&console.debug(`busy item "${window.busyQueue[arrayIndex].id}" stopped!`),window.busyQueue.splice(arrayIndex,1))),window.busyQueue.forEach((item=>{item.expiry<=Date.now()&&(arrayIndex=window.busyQueue.findIndex((busyItem=>busyItem.id===item.id)),arrayIndex>-1&&(debug&&console.debug(`removing expired busy item "${window.busyQueue[arrayIndex].id}"`),window.busyQueue.splice(arrayIndex,1)))}))}_updateBusy()}function reset(){window.busyQueue=[],_updateBusy()}function status(){_initQueue(),console.log("busy queue:",window.busyQueue)}function _elementExists(el){return void 0!==el&&el instanceof Element}function _initQueue(){"object"!=typeof window.busyQueue&&(window.busyQueue=[])}function _updateBusy(){debug&&console.debug(`_updateBusy() queue length: ${window.busyQueue.length}`),0===window.busyQueue.length?(!function(){window.clearTimeout(fadeoutAnimationTimer),_elementExists(busyAnimation)&&(busyAnimation.style.opacity="0");fadeoutAnimationTimer=window.setTimeout((()=>{_elementExists(busyAnimation)&&(busyAnimation.style.display="none")}),500)}(),_fadeOutModal()):(!function(id){window.clearTimeout(fadeoutAnimationTimer),_elementExists(modalUnderlay)||(modalUnderlay=window.document.body.querySelector("#animated-loader-modal-underlay"),null===modalUnderlay&&(modalUnderlay=window.document.createElement("div"),modalUnderlay.id="animated-loader-modal-underlay",window.document.body.appendChild(modalUnderlay)));_elementExists(busyAnimation)||(busyAnimation=window.document.body.querySelector("#animated-loader"),null===busyAnimation&&(busyAnimation=window.document.createElement("div"),busyAnimation.id="animated-loader",busyAnimation.innerHTML="<div><div><div><div><div><div><div><div><div><div></div></div></div></div></div></div></div></div></div>",window.document.body.appendChild(busyAnimation)));const topZ=function(){let zTop=0;const elements=window.document.getElementsByTagName("*");for(let i=0;i<elements.length;i++){let zIndex=window.getComputedStyle(elements[i]).getPropertyValue("z-index");zIndex=isNaN(zIndex)?0:parseInt(zIndex),zIndex&&zIndex>zTop&&(zTop=zIndex)}return zTop}().toString();busyAnimation.style.zIndex=topZ,modalUnderlay.style.zIndex=topZ,busyAnimation.title=id,busyAnimation.style.display="block",busyAnimation.style.opacity="1"}(window.busyQueue[0].id),window.busyQueue.some((item=>item.modal))?(window.clearTimeout(fadeoutModalTimer),_elementExists(modalUnderlay)&&(modalUnderlay.style.display="block",modalUnderlay.style.opacity="1")):_fadeOutModal())}function _fadeOutModal(){window.clearTimeout(fadeoutModalTimer),_elementExists(modalUnderlay)&&(modalUnderlay.style.opacity="0"),fadeoutModalTimer=window.setTimeout((()=>{_elementExists(modalUnderlay)&&(modalUnderlay.style.display="none")}),500)}}}]);